<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_pepperman</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_pepperman</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>stunhp = 5;
image_xscale = -1;
hsp = 0;
vsp = 0;
grav = 0.5;
flash = 0;
movespeed = 0;
charging = 0;
chargingdown = 0;
bossstart = 0;
stunned = 0;
alarm[1] = 50;
hp = 10;
thrown = 0;
dead = 0;
normalspr = 115;
hurtspr = 109;
chargespr = 110;
stunspr = 108;
flashing = 0;
slapped = 0;
maxspeed = 12;
obj_tv.message = "PEPPERMAN TIME!!";
obj_tv.showtext = 1;
obj_tv.tvsprite = 510;
obj_tv.alarm[0] = 150;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (sprite_index == chargespr || sprite_index == hurtspr)
{
    flash = 1;
    alarm[6] = 10;
}
else
{
    flashing = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
instance_create(x, y, obj_bossdefeatflash);

if (room == AT_roomboss)
{
    instance_destroy(obj_wave);
    obj_tv.message = "VICTORY!!!";
    obj_tv.showtext = 1;
    obj_tv.alarm[0] = 260;
    obj_tv.tvsprite = 525;
    obj_tv.image_speed = 0.1;
    obj_player.image_index = 0;
    obj_player.x = 704;
    obj_player.hsp = 0;
    obj_player.y = 562;
    obj_player.sprite_index = spr_player_levelcomplete;
    obj_player.state = 45;
    instance_create(1230, 562, obj_noise);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var a;

a = random_range(-100, 100);
alarm[4] = 5;
obj_camera.shake_mag = 3;
obj_camera.shake_mag_acc = 4 / room_speed;

with (instance_create(x + a, y + a, obj_bombexplosion))
    mask_index = spr_masknull;

instance_create(x + a, y + a, obj_slapstar);
instance_create(x + a, y + a, obj_slapstar);
instance_create(x + a, y + a, obj_slapstar);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>flash = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>charging = 1;
stunned = 0;
stunhp = 5;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!instance_exists(obj_slaphitbox) &amp;&amp; !instance_exists(obj_shotgunbullet))
    slapped = 0;

if (hp == 10)
    maxspeed = 12;

if (hp == 8)
    maxspeed = 14;

if (hp == 6)
    maxspeed = 16;

if (hp == 4)
    maxspeed = 18;

if (hp == 2)
    maxspeed = 20;

image_speed = 0.35;

if ((sprite_index == chargespr || sprite_index == hurtspr) &amp;&amp; flashing == 0)
{
    alarm[6] = 1;
    flashing = 1;
}

if (charging == 0 &amp;&amp; stunned == 0)
{
    if (obj_player.x != x)
        image_xscale = sign(obj_player.x - x);
    
    hsp = 0;
    sprite_index = normalspr;
}

if (stunned == 1 &amp;&amp; thrown == 0)
{
    if (hsp &lt; 0)
        hsp += 0.1;
    else if (hsp &gt; 0)
        hsp -= 0.1;
}

if (charging == 1 &amp;&amp; stunned == 0)
{
    if (!instance_exists(obj_peppermancharge))
        instance_create(x, y, obj_peppermancharge);
    
    hsp = image_xscale * movespeed;
    
    if (!place_meeting(x + 50, y + 3, obj_wall))
        image_xscale = -1;
    
    if (!place_meeting(x - 50, y + 3, obj_wall))
        image_xscale = 1;
    
    if (chargingdown == 0 &amp;&amp; stunned == 0)
    {
        if (movespeed &lt; maxspeed)
            movespeed += 0.1;
        
        if (movespeed &gt;= maxspeed)
            chargingdown = 1;
    }
    
    if (chargingdown == 1 &amp;&amp; stunned == 0)
    {
        movespeed -= 0.25;
        
        if (movespeed &lt;= 0)
        {
            alarm[1] = 100;
            chargingdown = 0;
            charging = 0;
        }
    }
    
    sprite_index = chargespr;
}

if (charging == 1 &amp;&amp; movespeed &gt; 6)
    image_speed = 0.6;
else
    image_speed = 0.35;

if (floor(image_index) == 0 &amp;&amp; charging == 1 &amp;&amp; place_meeting(x, y + 1, obj_collisionparent))
    instance_create(x, y + 90, obj_cloudeffect);

if (obj_player.state == 37 || obj_player.state == 34 || !place_meeting(x, y + 1, obj_collisionparent))
{
    stunned = 1;
    movespeed = 0;
    charging = 0;
    chargingdown = 0;
    alarm[1] = 100;
}

if (hp &lt;= 0 &amp;&amp; dead == 0)
{
    scr_sleep(250);
    dead = 1;
    alarm[1] = -1;
    alarm[4] = 5;
    alarm[5] = 100;
}

if (place_meeting(x, y + 1, obj_collisionparent) &amp;&amp; thrown == 1)
{
    instance_create(x, y, obj_slapstar);
    instance_create(x, y, obj_slapstar);
    instance_create(x, y, obj_slapstar);
    scr_sound(30);
    obj_camera.shake_mag = 3;
    obj_camera.shake_mag_acc = 4 / room_speed;
    thrown = 0;
    hp -= 1;
    flash = 1;
    charging = 0;
    stunned = 1;
    movespeed = 0;
    
    if (obj_player.x != x)
        image_xscale = sign(obj_player.x - x);
    
    hsp = sign(x - obj_player.x) * 6;
    vsp = -8;
    
    if (hp &gt; 6)
        sprite_index = spr_pepperman_hurt;
    
    if (hp &lt;= 6 &amp;&amp; hp &gt; 3)
        sprite_index = spr_peppermanmid_hurt;
    else if (hp &lt;= 3)
        sprite_index = spr_peppermanlow_hurt;
}

if (thrown == 0 &amp;&amp; (obj_player.state == 19 || obj_player.state == 37 || obj_player.state == 32 || obj_player.state == 38 || obj_player.state == 40 || obj_player.state == 34 || obj_player.state == 41 || obj_player.state == 39))
{
    charging = 0;
    chargingdown = 0;
    movespeed = 0;
    image_xscale = -obj_player.xscale;
    
    if (place_meeting(x, y, obj_player))
    {
        if (obj_player.state == 38 &amp;&amp; floor(obj_player.image_index) == 2)
        {
            instance_create(x + (obj_player.xscale * 30), y, obj_bumpeffect);
            thrown = 1;
            hsp = -image_xscale * 15;
            vsp = -6;
        }
        
        if (obj_player.state == 39 &amp;&amp; floor(obj_player.image_index) == 2)
        {
            instance_create(x + (-obj_player.xscale * 50), y, obj_bumpeffect);
            thrown = 1;
            image_xscale *= -1;
            hsp = -image_xscale * 10;
            vsp = -6;
        }
        
        if (obj_player.state == 41 &amp;&amp; floor(obj_player.image_index) == 2)
        {
            instance_create(x, y + 20, obj_bumpeffect);
            thrown = 1;
            hsp = -image_xscale * 5;
            vsp = -10;
        }
        
        if (obj_player.state == 32 &amp;&amp; floor(obj_player.image_index) == 2)
        {
            thrown = 1;
            hsp = -image_xscale * 7;
            vsp = -10;
        }
        
        if (obj_player.state == 40 &amp;&amp; floor(obj_player.image_index) == 2)
        {
            instance_create(x + (-obj_player.xscale * 15), y - 50, obj_bumpeffect);
            thrown = 1;
            hsp = -image_xscale * 2;
            state = 95;
            vsp = -20;
        }
    }
    
    if (obj_player.state == 34)
    {
        if (floor(obj_player.image_index) == 0)
        {
            depth = 0;
            x = obj_player.x + (obj_player.xscale * 20);
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 1)
        {
            depth = 0;
            x = obj_player.x + (obj_player.xscale * 10);
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 2)
        {
            depth = 0;
            x = obj_player.x;
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 3)
        {
            depth = 0;
            x = obj_player.x + (obj_player.xscale * -10);
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 4)
        {
            depth = 0;
            x = obj_player.x + (obj_player.xscale * -20);
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 5)
        {
            depth = -7;
            x = obj_player.x + (obj_player.xscale * -10);
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 6)
        {
            depth = -7;
            x = obj_player.x;
            y = obj_player.y - 70;
        }
        
        if (floor(obj_player.image_index) == 7)
        {
            depth = -7;
            x = obj_player.x + (obj_player.xscale * 10);
            y = obj_player.y - 70;
        }
        
        if (obj_player.sprite_index == spr_player_piledriverland)
        {
            thrown = 1;
            hsp = -image_xscale * 4;
            vsp = -5;
        }
    }
    
    image_xscale = -obj_player.xscale;
    stunned = 1;
}

if (flash == 1 &amp;&amp; alarm[3] &lt;= 0)
    alarm[3] = 0.01 * room_speed;

if (hp &gt; 6)
{
    normalspr = 115;
    hurtspr = 109;
    chargespr = 110;
    stunspr = 108;
}

if (hp &lt;= 6 &amp;&amp; hp &gt; 3)
{
    normalspr = 119;
    hurtspr = 117;
    chargespr = 118;
    stunspr = 116;
}
else if (hp &lt;= 3)
{
    normalspr = 114;
    hurtspr = 112;
    chargespr = 113;
    stunspr = 111;
}

scr_collideandmoveonlywall();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_shotgunbullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (slapped == 0)
{
    obj_camera.shake_mag = 3;
    obj_camera.shake_mag_acc = 4 / room_speed;
    thrown = 0;
    hp -= 1;
    flash = 1;
    charging = 0;
    stunned = 1;
    movespeed = 0;
    
    if (obj_player.x != x)
        image_xscale = sign(obj_player.x - x);
    
    hsp = sign(x - obj_player.x) * 6;
    vsp = -8;
    
    if (hp &gt; 6)
        sprite_index = spr_pepperman_hurt;
    
    if (hp &lt;= 6 &amp;&amp; hp &gt; 3)
        sprite_index = spr_peppermanmid_hurt;
    else if (hp &lt;= 3)
        sprite_index = spr_peppermanlow_hurt;
    
    slapped = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_slaphitbox">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (stunned == 1 &amp;&amp; stunhp == 0 &amp;&amp; alarm[1] &gt; 40 &amp;&amp; slapped == 0 &amp;&amp; sprite_index == stunspr)
{
    stunhp = 5;
    x = obj_player.x + (obj_player.xscale * 20);
    charging = 0;
    chargingdown = 0;
    state = 37;
    movespeed = 0;
    slapped = 1;
    instance_create(x + (obj_player.xscale * 40), y, obj_punchdust);
    obj_player.state = 37;
    instance_destroy(other.id);
}

if (stunhp == 0 &amp;&amp; !(stunned == 1 &amp;&amp; alarm[1] &gt; 40) &amp;&amp; slapped == 0 &amp;&amp; (sprite_index == normalspr || sprite_index == stunspr))
{
    scr_sound(29);
    instance_create(x, y, obj_spikehurteffect);
    other.image_xscale = image_xscale;
    slapped = 1;
    flash = 1;
    instance_create(x, y, obj_bumpeffect);
    alarm[1] = 100;
    
    if (other.x != x)
        image_xscale = -sign(x - other.x);
    
    vsp = -5;
    hsp = -image_xscale * 3;
    stunned = 1;
    sprite_index = stunspr;
}
else if (slapped == 0 &amp;&amp; (sprite_index == normalspr || sprite_index == stunspr))
{
    scr_sound(21);
    
    if (stunhp &gt; 0)
        stunhp -= 1;
    
    if (slapped == 0)
        instance_create(x, y, obj_slapstar);
    
    with (instance_create(x, y, obj_spikehurteffect))
        other.image_xscale = image_xscale;
    
    slapped = 1;
    stunned = 1;
    sprite_index = stunspr;
    alarm[1] = 40;
    
    if (other.x != x)
        image_xscale = -sign(x - other.x);
    
    vsp = -3;
    hsp = -image_xscale * 2;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (obj_player.y &lt; y &amp;&amp; obj_player.state == 49)
{
    scr_sound(21);
    
    with (obj_player)
    {
        if (key_jump2)
        {
            instance_create(x, y + 50, obj_stompeffect);
            stompAnim = 1;
            vsp = -14;
            sprite_index = spr_player_stompprep;
        }
        else
        {
            instance_create(x, y + 50, obj_stompeffect);
            stompAnim = 1;
            vsp = -9;
            sprite_index = spr_player_stompprep;
        }
    }
}

if (obj_player.state == 61)
{
    instance_create(obj_player.x, obj_player.y, obj_bumpeffect);
    movespeed = 0;
    obj_player.state = 48;
    obj_player.image_index = 0;
    
    if (obj_player.x != x)
        image_xscale = sign(obj_player.x - x);
    
    hsp = sign(x - obj_player.x) * 4;
    vsp = -3;
    
    if (sprite_index != hurtspr)
    {
        sprite_index = stunspr;
        charging = 0;
        stunned = 1;
        alarm[1] = 100;
    }
}

if (obj_player.state == 81)
{
    scr_sound(30);
    obj_camera.shake_mag = 3;
    obj_camera.shake_mag_acc = 4 / room_speed;
    instance_create(x, y, obj_slapstar);
    instance_create(x, y, obj_slapstar);
    instance_create(x, y, obj_slapstar);
    hp -= 1;
    flash = 1;
    charging = 0;
    stunned = 1;
    movespeed = 0;
    obj_player.state = 48;
    obj_player.image_index = 0;
    
    if (obj_player.x != x)
        image_xscale = sign(obj_player.x - x);
    
    hsp = sign(x - obj_player.x) * 6;
    vsp = -8;
    
    if (hp == 10)
    {
        alarm[1] = 100;
        alarm[0] = 100;
    }
    
    if (hp == 9)
    {
        alarm[1] = 90;
        alarm[0] = 90;
    }
    
    if (hp == 8)
    {
        alarm[1] = 80;
        alarm[0] = 80;
    }
    
    if (hp == 7)
    {
        alarm[1] = 70;
        alarm[0] = 70;
    }
    
    if (hp == 6)
    {
        alarm[1] = 60;
        alarm[0] = 60;
    }
    
    if (hp == 5)
    {
        alarm[1] = 50;
        alarm[0] = 50;
    }
    
    if (hp == 4)
    {
        alarm[1] = 40;
        alarm[0] = 40;
    }
    
    if (hp == 3)
    {
        alarm[1] = 30;
        alarm[0] = 30;
    }
    
    if (hp == 2)
    {
        alarm[1] = 30;
        alarm[0] = 30;
    }
    
    if (hp == 1)
    {
        alarm[1] = 30;
        alarm[0] = 30;
    }
    
    if (hp &gt; 6)
        sprite_index = spr_pepperman_hurt;
    
    if (hp &lt;= 6 &amp;&amp; hp &gt; 3)
        sprite_index = spr_peppermanmid_hurt;
    else if (hp &lt;= 3)
        sprite_index = spr_peppermanlow_hurt;
}

with (obj_player)
{
    if ((state != 48 &amp;&amp; state != 64) &amp;&amp; !(y &lt; other.y) &amp;&amp; state != 37 &amp;&amp; state != 34 &amp;&amp; grabbing == 0 &amp;&amp; other.stunned == 0)
    {
        if (x != other.x)
            xscale = -sign(x - other.x);
        
        hsp = -xscale * 4;
        vsp = -4;
        image_index = 0;
        state = 63;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x = xstart;
y = ystart;
image_xscale = -1;
hsp = 0;
vsp = 0;
grav = 0.5;
flash = 0;
movespeed = 0;
charging = 0;
chargingdown = 0;
bossstart = 0;
stunned = 0;
alarm[1] = 50;
hp = 10;
thrown = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (flash)
{
    shader_set(shd_hit);
    draw_self();
    shader_reset();
}
else
{
    draw_self();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
